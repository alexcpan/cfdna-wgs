Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 4
Rules claiming more threads will be scaled down.
Job stats:
job             count    min threads    max threads
------------  -------  -------------  -------------
alignment_qc        8              1              1
all                 1              1              1
total               9              1              1

Select jobs to execute...

[Wed Apr 13 12:38:07 2022]
rule alignment_qc:
    input: test/bam/lib004_raw.bam
    output: test/qc/lib004_raw_samstats.txt, test/qc/lib004_raw_flagstat.txt
    jobid: 31
    wildcards: fq_id=lib004, bam_step=raw
    resources: tmpdir=/tmp

Activating singularity image /home/jeszyman/sing_containers/biotools.sif

[Wed Apr 13 12:38:07 2022]
rule alignment_qc:
    input: test/bam/lib002_raw.bam
    output: test/qc/lib002_raw_samstats.txt, test/qc/lib002_raw_flagstat.txt
    jobid: 27
    wildcards: fq_id=lib002, bam_step=raw
    resources: tmpdir=/tmp

Activating singularity image /home/jeszyman/sing_containers/biotools.sif

[Wed Apr 13 12:38:07 2022]
rule alignment_qc:
    input: test/bam/lib003_raw.bam
    output: test/qc/lib003_raw_samstats.txt, test/qc/lib003_raw_flagstat.txt
    jobid: 29
    wildcards: fq_id=lib003, bam_step=raw
    resources: tmpdir=/tmp


Activating singularity image /home/jeszyman/sing_containers/biotools.sif
[Wed Apr 13 12:38:07 2022]
rule alignment_qc:
    input: test/bam/lib001_dedup.bam
    output: test/qc/lib001_dedup_samstats.txt, test/qc/lib001_dedup_flagstat.txt
    jobid: 26
    wildcards: fq_id=lib001, bam_step=dedup
    resources: tmpdir=/tmp

Activating singularity image /home/jeszyman/sing_containers/biotools.sif
[Wed Apr 13 12:38:07 2022]
Error in rule alignment_qc:
    jobid: 31
    output: test/qc/lib004_raw_samstats.txt, test/qc/lib004_raw_flagstat.txt
    shell:
        
        samtools stats -@ 4 test/bam/lib004_raw.bam > test/qc/lib004_raw_samstats.txt
        samtools flagstat -@ 4 test/bam/lib004_raw.bam > test/qc/lib004_raw_flagstat.txt
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Removing output files of failed job alignment_qc since they might be corrupted:
test/qc/lib004_raw_samstats.txt
[Wed Apr 13 12:38:07 2022]
Error in rule alignment_qc:
    jobid: 27
    output: test/qc/lib002_raw_samstats.txt, test/qc/lib002_raw_flagstat.txt
    shell:
        
        samtools stats -@ 4 test/bam/lib002_raw.bam > test/qc/lib002_raw_samstats.txt
        samtools flagstat -@ 4 test/bam/lib002_raw.bam > test/qc/lib002_raw_flagstat.txt
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Removing output files of failed job alignment_qc since they might be corrupted:
test/qc/lib002_raw_samstats.txt
[Wed Apr 13 12:38:07 2022]
Error in rule alignment_qc:
    jobid: 29
    output: test/qc/lib003_raw_samstats.txt, test/qc/lib003_raw_flagstat.txt
    shell:
        
        samtools stats -@ 4 test/bam/lib003_raw.bam > test/qc/lib003_raw_samstats.txt
        samtools flagstat -@ 4 test/bam/lib003_raw.bam > test/qc/lib003_raw_flagstat.txt
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Removing output files of failed job alignment_qc since they might be corrupted:
test/qc/lib003_raw_samstats.txt
[Wed Apr 13 12:38:07 2022]
Error in rule alignment_qc:
    jobid: 26
    output: test/qc/lib001_dedup_samstats.txt, test/qc/lib001_dedup_flagstat.txt
    shell:
        
        samtools stats -@ 4 test/bam/lib001_dedup.bam > test/qc/lib001_dedup_samstats.txt
        samtools flagstat -@ 4 test/bam/lib001_dedup.bam > test/qc/lib001_dedup_flagstat.txt
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Removing output files of failed job alignment_qc since they might be corrupted:
test/qc/lib001_dedup_samstats.txt
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /home/jeszyman/repos/mpnst-preprocessing/.snakemake/log/2022-04-13T123806.364891.snakemake.log
